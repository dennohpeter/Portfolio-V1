{"version":3,"sources":["webpack:///webpack/bootstrap c03e39bcd3a4533ad6f0","webpack:///./_src/js/App.js","webpack:///./_src/js/app/Jello.js"],"names":["App","app","jello","timeline","initialize","Jello","options","defaults","canvasHolder","document","getElementById","imgWidth","imgHeight","imgRatio","winWidth","window","innerWidth","bgArray","bgSpriteArray","renderer","PIXI","autoDetectRenderer","stage","Container","imgContainer","imageCounter","displacementSprite","Sprite","fromImage","displacementFilter","filters","DisplacementFilter","currentMap","mapCounter","mapArray","raf","animateFilters","bind","isDistorted","isTransitioning","console","log","transition","speed","dispScale","dispX","dispY","count","update","push","image","scale","backgroundFill","buildStage","createBackgrounds","createFilters","eventListener","view","setAttribute","appendChild","x","settings","y","Math","sin","cos","rotation","render","requestAnimationFrame","position","interactive","addChild","length","map","sprite","i","TweenLite","to","alpha","ease","Power2","easeInOut","bg","anchor","amt","onComplete","changeImageBtn","getElementsByClassName","changeDistortionBtn","toggleDistorionBtn","onclick","changeImage","changeMap","toggleDistortion","distortionLevel","Object","assign","cancelAnimationFrame"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c03e39bcd3a4533ad6f0","import Jello from './app/Jello';\n\n// App class for all js\nexport default class App {\n  constructor() {\n    this.app = this;\n    this.jello;\n    this.timeline;\n    this.initialize();\n  }\n\n  initialize() {\n    // new instance of Jello class\n    this.jello = new Jello();\n    \n  }\n}\n\n// App export to scripts/app.js\nconst app = new App();\n\n\n\n// WEBPACK FOOTER //\n// ./_src/js/App.js","export default class Jello {\n\n  // Cached variables that can be used and changed in all the functions in the class\n  constructor(options = {}) {\n    this.defaults = {};\n    this.options = options;\n    this.canvasHolder = document.getElementById('jello-container');\n    this.imgWidth = 1920;\n    this.imgHeight = 960;\n    this.imgRatio = this.imgHeight / this.imgWidth;\n    this.winWidth = window.innerWidth;\n    this.bgArray = [];\n    this.bgSpriteArray = [];\n    this.renderer = PIXI.autoDetectRenderer( this.winWidth, (this.winWidth * this.imgRatio) );\n    this.stage = new PIXI.Container();\n    this.imgContainer = new PIXI.Container();\n    this.imageCounter = 0;\n    this.displacementSprite = PIXI.Sprite.fromImage('/assets/images/distortion/dmap-clouds-01.jpg');\n    this.displacementFilter = new PIXI.filters.DisplacementFilter(this.displacementSprite);\n    this.currentMap = {};\n    this.mapCounter = 0;\n    this.mapArray = [];\n    this.raf = this.animateFilters.bind(this);\n\n    this.isDistorted = true;\n    this.isTransitioning = false;\n\n    this.initialize();\n  }\n\n  initialize() {\n    console.log('Jello initialized')\n\n    this.defaults = {\n      transition: 1,\n      speed: 0.5,\n      dispScale: 200,\n      dispX: true,\n      dispY: true,\n      count: 0\n    };\n\n    this.update();\n\n    // An array of images for background (.jpg)\n    // They'll transition in the order listed below\n    this.bgArray.push(\n      'image-1',\n      'image-2'\n    );\n\n    // An array of displacement maps\n    // They'll transition in the order below with the included settings\n    this.mapArray.push(\n      {\n        image: 'dmap-clouds-01.jpg',\n        speed: 0.5,\n        scale: 200\n      },\n      {\n        image: 'dmap-glass-01.jpg',\n        speed: 0.3,\n        scale: 200\n      }\n    );\n\n    this.backgroundFill();\n    this.buildStage();\n    this.createBackgrounds();\n    this.createFilters();\n    this.animateFilters();\n    this.eventListener();\n\n    this.renderer.view.setAttribute('class', 'jello-canvas');\n    this.canvasHolder.appendChild(this.renderer.view);\n  }\n\n  // define animations and call this.raf\n  animateFilters() {\n    this.displacementFilter.scale.x = this.settings.dispX ? this.settings.transition * this.settings.dispScale : 0;\n    this.displacementFilter.scale.y = this.settings.dispY ? this.settings.transition * (this.settings.dispScale + 10) : 0;\n\n    this.displacementSprite.x = Math.sin(this.settings.count * 0.15) * 200;\n    this.displacementSprite.y = Math.cos(this.settings.count * 0.13) * 200;\n\n    this.displacementSprite.rotation = this.settings.count * 0.06;\n\n    this.settings.count += 0.05 * this.settings.speed;\n\n    this.renderer.render(this.stage);\n\n    window.requestAnimationFrame(this.raf);\n  }\n\n  // canvas built to fill width of window\n  backgroundFill() {\n    this.renderer.view.setAttribute('style', 'height:auto;width:100%;');\n  }\n\n  // main container for animation\n  buildStage() {\n    this.imgContainer.position.x = this.imgWidth / 2;\n    this.imgContainer.position.y = this.imgHeight / 2;\n\n    this.stage.scale.x = this.stage.scale.y = this.winWidth / this.imgWidth;\n    this.stage.interactive = true;\n    this.stage.addChild(this.imgContainer);\n  }\n\n  // cycle through this.bgArray and change images with crossfade\n  changeImage() {\n    if(this.imageCounter < (this.bgArray.length - 1)) {\n      this.imageCounter++;\n    } else {\n      this.imageCounter = 0;\n    }\n\n    this.bgSpriteArray.map((sprite, i) => {\n      if(i == this.imageCounter) {\n        TweenLite.to(sprite, 1, {alpha: 1, ease:Power2.easeInOut});\n      } else {\n        TweenLite.to(sprite, 1, {alpha: 0, ease:Power2.easeInOut});\n      }\n    });\n  }\n\n  // cycle through this.mapArray and change displacement maps\n  changeMap() {\n    if(this.mapCounter < (this.mapArray.length - 1)) {\n      this.mapCounter++;\n    } else {\n      this.mapCounter = 0;\n    }\n\n    this.currentMap = this.mapArray[this.mapCounter];\n    console.log(this.currentMap)\n    this.displacementSprite = PIXI.Sprite.fromImage(`/assets/images/distortion/${this.currentMap.image}`);\n    this.displacementFilter = new PIXI.filters.DisplacementFilter(this.displacementSprite);\n    this.createFilters();\n  }\n\n  // preload all backgrounds for quick transitions\n  createBackgrounds() {\n    this.bgArray.map((image) => {\n      const bg = PIXI.Sprite.fromImage(`/assets/images/bg/${image}.jpg`);\n\n      // Set image anchor to the center of the image\n      bg.anchor.x = 0.5;\n      bg.anchor.y = 0.5;      \n\n      this.imgContainer.addChild(bg);\n      this.bgSpriteArray.push(bg);\n\n      // set first image alpha to 1, all else to 0\n      bg.alpha = this.bgSpriteArray.length === 1 ? 1 : 0;\n    });\n  }\n\n  // distortion filters added to stage\n  createFilters() {\n    this.stage.addChild(this.displacementSprite);\n\n    this.displacementFilter.scale.x = this.displacementFilter.scale.y = this.winWidth / this.imgWidth;\n\n    this.imgContainer.filters = [\n      this.displacementFilter\n    ]\n  }\n\n  // function changes the distortion level to a specific amount\n  distortionLevel(amt) {\n    if(!this.isTransitioning){\n      this.isTransitioning = true;\n      TweenLite.to(this.settings, 1, {\n        transition: amt,\n        speed: this.currentMap.speed,\n        dispScale: this.currentMap.scale,\n        ease: Power2.easeInOut,\n        onComplete: () => {\n          this.isTransitioning = false;\n        }\n      });\n    }\n  }\n\n  // click events\n  eventListener() {\n    const changeImageBtn = document.getElementsByClassName('js-change-image')[0];\n    const changeDistortionBtn = document.getElementsByClassName('js-change-distortion')[0];\n    const toggleDistorionBtn = document.getElementsByClassName('js-toggle-distortion')[0];\n\n    changeImageBtn.onclick = () => {\n      this.changeImage();\n    }\n\n    changeDistortionBtn.onclick = () => {\n      this.changeMap();\n    }\n\n    toggleDistorionBtn.onclick = () => {\n      this.toggleDistortion();\n    }\n  }\n\n  // turn the distortion on and off using the options.transistion variable\n  toggleDistortion() {\n    if(this.isDistorted) {\n      this.distortionLevel(0);\n      this.isDistorted = false;\n    } else {\n      this.distortionLevel(1);\n      this.isDistorted = true;\n    }\n  }\n\n  // Object.assign overwrites defaults with options to create settings\n  update() {\n    this.settings = Object.assign({}, this.defaults, this.options);\n  }\n\n// ============ TEAR DOWN =============== //\n\n  tearDown() {\n    window.cancelAnimationFrame(this.raf);\n    this.settings = {};\n    this.bgArray = [];\n    this.bgSpriteArray = [];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./_src/js/app/Jello.js"],"sourceRoot":""}